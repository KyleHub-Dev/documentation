---
title: Pangolin Auth Provider Setup
sidebar_position: 5
tags:
  - Pangolin
  - Authentication
  - OIDC
  - Zitadel
---

# Using Zitadel as Pangolin's Identity Provider

With Zitadel published through Pangolin, the next step is to delegate Pangolin authentication to Zitadel. This guide walks through creating a dedicated OIDC application in Zitadel, wiring it into Pangolin, and validating the single sign-on flow.

## Understanding Projects vs Applications in Zitadel

For setting up Zitadel as an authentication provider, you need **both** a Project and an Application:

- **Project**: The organizational container that holds users, roles, and applications. It defines the scope of access and permissions.
- **Application**: The specific OIDC/OAuth2 client configuration within a project. It contains the technical details like redirect URIs, client credentials, and authentication flows.

You'll create a project first (e.g., "Pangolin Access"), then add a web application within that project for the OIDC integration.

## Prerequisites

- Zitadel is reachable at `https://auth.yourdomain.com` and accessible from Pangolin
- Pangolin is live at `https://pangolin.yourdomain.com` (see the [Pangolin setup docs](../pangolin-setup/index.md)).
- You are signed in as a Zitadel administrator and a Pangolin administrator.

## Step 1 – Create a project and OIDC application in Zitadel

1. Log into the Zitadel console and navigate to your organization.
2. Create a dedicated project (e.g., **Pangolin Access**) to keep permissions scoped.
3. Inside the project, add an **Application** of type **Web** with the following settings:
   - **Redirect URIs**: `https://pangolin.yourdomain.com/oauth2/callback` (adjust if your Pangolin version exposes a different callback path; the UI shows the exact value when adding the provider).
   - **Post-logout redirect**: `https://pangolin.yourdomain.com`.
   - **Response types**: Authorization Code (default) with PKCE enabled.
   - **Grant types**: Authorization Code, Refresh Token.
   - **Authentication method**: `client_secret_post` (Pangolin supports standard confidential clients).
4. Generate a client secret and store it securely—it will be needed when configuring Pangolin.
5. Under **Roles** or **Actions**, create a role such as `pangolin.admin` if you plan to map Zitadel groups to Pangolin roles.
6. Add users or groups that should administer Pangolin as members of the project, and assign the role if created.

### Optional: Service user for API access

If Pangolin requires programmatic API access (for example, to sync users), create a service user within the same project and grant it the `Project Owner` role. Record its client ID/secret separately.

## Step 2 – Gather OIDC endpoints

All metadata is available from Zitadel's discovery document:

```
https://zitadel.yourdomain.com/.well-known/openid-configuration
```

Note the **issuer**, **authorization endpoint**, **token endpoint**, **userinfo endpoint**, and **JWKS URI**. These values will populate Pangolin's identity provider form.

## Step 3 – Configure Zitadel as an IdP in Pangolin

1. Log into the Pangolin dashboard as an administrator.
2. Navigate to **Settings → Identity Providers** (or **Settings → Authentication**, depending on your version).
3. Click **Add Provider** and choose **OpenID Connect (OIDC)**.
4. Fill in the form using the values collected from Zitadel:
   - **Name**: `Zitadel`
   - **Issuer / Authority**: `https://zitadel.yourdomain.com`
   - **Client ID**: the ID generated for the Pangolin OIDC application
   - **Client Secret**: the secret generated in Step 1
   - **Redirect URI**: Confirm it matches the value displayed in Pangolin. If different from the one added in Zitadel, update the Zitadel application to include the additional URI.
   - **Scopes**: `openid profile email offline_access`
   - **Prompt**: `login` (recommended) so Pangolin always redirects users to Zitadel
   - **User ID claim**: `sub`
   - **Display name claim**: `name`
   - **Email claim**: `email`
5. Save the provider. Pangolin will verify reachability of Zitadel’s discovery endpoint.

### Role mapping (optional)

If you created custom roles in Zitadel, map them to Pangolin roles:

1. In the provider configuration, open the **Role Mapping** tab.
2. Add entries such as `pangolin.admin` → `Administrator`, `pangolin.viewer` → `Read Only`.
3. Ensure Zitadel issues the `roles` or `groups` claim by enabling it in the application settings.

## Step 4 – Test the sign-on flow

1. Log out of Pangolin (or open a private browser window).
2. Navigate to `https://pangolin.yourdomain.com`.
3. Click **Sign in with Zitadel**. You should be redirected to the Zitadel login screen.
4. Authenticate with a user that has access to the Pangolin project.
5. Upon successful login, you should land back in Pangolin with your user profile populated from Zitadel claims.

## Step 5 – Troubleshooting tips

| Symptom | Likely cause | Fix |
| ------- | ------------ | --- |
| Pangolin shows “Unable to reach identity provider” | Discovery URL blocked or mis-typed | Verify `https://zitadel.yourdomain.com/.well-known/openid-configuration` is accessible from the Pangolin LXC. |
| Login loop between Pangolin and Zitadel | Redirect URI mismatch | Ensure the exact callback URL is registered in the Zitadel application and displayed in Pangolin. |
| Users receive “access denied” after login | Role mapping missing | Map Zitadel roles/groups to Pangolin roles or assign the default access level in Pangolin. |
| Invalid client error | Wrong client ID/secret | Regenerate the secret in Zitadel and update Pangolin. |

For deeper diagnostics, inspect Pangolin’s logs (`docker compose logs pangolin`) and Zitadel’s audit trail. Once the integration works, document the client ID/secret and role assignments alongside your Pangolin deployment notes for future maintenance.