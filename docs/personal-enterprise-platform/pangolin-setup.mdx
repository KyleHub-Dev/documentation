---
title: Pangolin Setup
sidebar_position: 4
---

:::info Official Documentation
This guide is based on the official Pangolin documentation available at [https://docs.digpangolin.com/](https://docs.digpangolin.com/). For the most up-to-date information, please refer to the official docs.
:::

This document provides a comprehensive guide to installing and configuring Pangolin as an infrastructure management platform on Proxmox VE.

## What is Pangolin?

[Pangolin](https://digpangolin.com/) is a self-hosted infrastructure management platform that provides:
- Server and service monitoring
- Docker container management
- Automated deployments
- Centralized dashboard for infrastructure overview
- Real-time alerts and notifications

## Prerequisites

Before proceeding with the Pangolin installation, ensure you have:

- Proxmox VE host with configured network bridges (see [Proxmox Setup](./proxmox-setup.mdx))
- OPNsense firewall configured (see [OPNsense Setup](./opnsense-setup.mdx))
- Domain name (optional, but recommended for HTTPS access via reverse proxy). This should be your base domain as established in the [Prerequisites for the Personal Enterprise Platform](./prerequisites.md).
- Basic understanding of Docker and containerization

## 1. LXC Container Creation

### 1.1 Container Specifications

Create a new LXC container in Proxmox with the following specifications:

**Basic Settings:**
- **Template**: Debian 13 (trixie) or latest stable (e.g., `debian-13-standard_13.1-1_amd64.tar.zst`)
- **Hostname**: `pangolin`
- **Unprivileged container**: No (Docker requires privileged)
- **Nesting**: Yes (enable in Options after creation)
- **Keyctl**: Yes (enable in Options after creation)
- **Password**: Enter and confirm a strong password. (Alternative: Use a SSH Key)

**Resources:**
- **Recommended**:
  - CPU: 4 cores
  - RAM: 4096 MB (4 GB)
  - Swap: 512 MB
  - Disk: 32 GB
- **Minimum**:
  - CPU: 2 cores
  - RAM: 2048 MB (2 GB)
  - Swap: 512 MB
  - Disk: 16 GB

**Network:**
- **Bridge**: `vmbr1` (your private LAN, as configured in [OPNsense Setup](./opnsense-setup.mdx))
- **IPv4**: Static (e.g., `192.168.1.50/24`)
- **Gateway**: Your OPNsense LAN IP (e.g., `192.168.1.1`)
- **IPv6**: If not required, leave all IPv6-related fields empty.

**DNS:**
- **DNS Domain**: This is your local network's domain name (e.g., `home.arpa`, `yourdomain.local`). It's used for local name resolution within your network. If you don't have a local domain name, you can leave this field empty.
- **DNS Server**: This is the IP address of the DNS server(s) the container will use. If you're using OPNsense as your DNS, enter its IP here (e.g., `192.168.1.1`).

### 1.2 Container Configuration for Docker

After creating the container, but **before starting it**, edit the container configuration to enable Docker support:

```bash
# On Proxmox host, edit the container config (replace <CTID> with your container ID)
nano /etc/pve/lxc/<CTID>.conf
```

Add these lines to enable Docker support:

```
lxc.apparmor.profile: unconfined
lxc.cgroup2.devices.allow: a
lxc.cap.drop:
lxc.mount.auto: proc:rw sys:rw
```

Save the file (`Ctrl + O`, `Enter`, `Ctrl + X`) and start the container.

<details>
  <summary>Example LXC Container Configuration</summary>

```
arch: amd64
cores: 2
hostname: pangolin
memory: 2048
nameserver: 192.168.1.1
net0: name=eth0,bridge=vmbr1,firewall=1,gw=192.168.1.1,hwaddr=BC:24:11:03:8E:BE,ip=192.168.1.50/24,type=veth
ostype: debian
rootfs: local:200/vm-200-disk-0.raw,size=16G
swap: 512
lxc.apparmor.profile: unconfined
lxc.cgroup2.devices.allow: a
lxc.cap.drop:
lxc.mount.auto: proc:rw sys:rw
```
</details>

## 2. System Preparation

Once the container is started, you can access it via the Proxmox web interface console or SSH. Log in as the `root` user with the password you set during the container creation.

### 2.1 Update System

Enter the container console (via Proxmox web interface or SSH) and update the system:

```bash
# Update package lists and upgrade existing packages
apt update && apt upgrade -y
```

```bash
# Install basic utilities
apt install -y curl sudo git ca-certificates gnupg
```

### 2.2 Install Docker and Docker Compose

Install Docker using the official installation script:

```bash
# Add Docker's official GPG key
install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc
chmod a+r /etc/apt/keyrings/docker.asc

# Add Docker repository
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  tee /etc/apt/sources.list.d/docker.list > /dev/null

# Install Docker
apt update
apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# Verify installation
docker --version
docker compose version
```

Expected output should show Docker version 20.x or higher and Docker Compose version 2.x or higher. 

```
...
Docker version 28.4.0, build d8eb465
Docker Compose version v2.39.4
```

## 3. Pangolin Installation

### 3.1 Method 1: Quick Install (Recommended)

:::info Official Quick Install Documentation
This quick install method is largely based on the official Pangolin documentation available at [https://docs.digpangolin.com/self-host/quick-install](https://docs.digpangolin.com/self-host/quick-install).
:::

Pangolin provides a quick installation script that automates the setup process:

#### 3.1.1 Download & Run the installer

```bash
# Run the quick install script
curl -fsSL https://digpangolin.com/get-installer.sh | bash
sudo ./installer
```

#### 3.1.2 Configure basic settings

The installer will prompt you for several basic settings:

- **Cloud Managed**: Do you want to install Pangolin as a cloud-managed (beta) node? (yes/no): **My recommendation**: **`no`**
- **Base Domain**: Enter your root domain without subdomains (e.g., `yourdomain.com`). *My example: `kylehub.dev` (you should use your own base domain)*
- **Dashboard Domain**: Press Enter to accept the default `pangolin.yourdomain.com` or enter a custom domain (e.g., `pangolin.kylehub.dev`). **My recommendation**: Press **`Enter`**
- **Let’s Encrypt Email**: Provide an email for SSL certificates and admin login. *My example: `admin@kylehub.dev` (replace with your actual email address)*
- Do you want to use Gerbil to allow tunneled connections (yes/no) (default: yes): **My recommendation**: Press Enter (accept default **`yes`**)
- Is your server IPv6 capable? (yes/no) (default: yes): **My recommendation**: Press Enter (accept default **`yes`**, but this can also be disabled)
- Would you like to run Pangolin as Docker or Podman containers? (default: docker): **My recommendation**: Press Enter (accept default **`docker`**)

#### 3.1.3 Configure email

:::info
Email functionality is optional and can be added later.
:::

Choose whether to enable SMTP email functionality:
*   **Default**: No (recommended for initial setup)
*   If enabled: You’ll need SMTP server details (host, port, username, password)

**My recommendation**: Select **`No`** for email functionality during initial setup.

#### 3.1.4 Start installation

Confirm that you want to install and start the containers:
*   The installer will pull Docker images (pangolin, gerbil, traefik)
*   Containers will be started automatically
*   This process takes 2-3 minutes depending on your internet connection
*   You’ll see progress indicators as each container is pulled and started.

**My recommendation**: Proceed with the installation by selecting **`Yes`.**

#### 3.1.5 Install CrowdSec (optional)

The installer will ask if you want to install CrowdSec for additional security:
*   **Default**: No (**recommended for initial setup**)
*   If enabled: You’ll need to confirm you’re willing to manage CrowdSec configuration

:::warning
CrowdSec adds complexity and requires manual configuration for optimal security. Only enable if you’re comfortable managing it.
:::
:::info
CrowdSec can be installed later if needed. The basic installation provides sufficient security for most use cases.
:::

**My recommendation**: Skip CrowdSec for now by selecting **`No`.**

#### 3.1.6 Initial Access & Setup Token

Once the installation is complete, the installer will display a **Setup Token**. You must copy and save this token immediately, as it is required for the initial setup of Pangolin.

## 4. Cloudflare DNS Configuration

Before configuring network access, you need to set up DNS records in Cloudflare to point to your Pangolin server.

### 4.1 Create DNS A Records

1. Log in to your [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. Select your domain (e.g., `kylehub.dev`)
3. Navigate to **DNS > Records**
4. Create the following two A records:

**Record 1: Base Domain**
- **Type**: A
- **Name**: `@` (this represents your base domain)
- **IPv4 address**: Your server's public IP address (e.g., `203.0.113.50`)
- **Proxy status**: DNS only (gray cloud icon) - **Important: Do not enable proxy**
- **TTL**: Auto

**Record 2: Wildcard Subdomain**
- **Type**: A
- **Name**: `*` (wildcard for all subdomains)
- **IPv4 address**: Your server's public IP address (e.g., `203.0.113.50`)
- **Proxy status**: DNS only (gray cloud icon) - **Important: Do not enable proxy**
- **TTL**: Auto

:::info Why Gray Cloud (DNS Only)?
Pangolin manages its own SSL certificates via Let's Encrypt through Traefik. Cloudflare's proxy (orange cloud) would interfere with this process and prevent proper certificate validation. Using "DNS only" allows direct connection to your server while still using Cloudflare's DNS service.
:::

### 4.2 Verify DNS Propagation

After creating the records, verify they are resolving correctly:

```bash
# Test base domain
dig yourdomain.com +short

# Test wildcard (using pangolin subdomain as example)
dig pangolin.yourdomain.com +short

# Both should return your server's public IP
```

DNS propagation typically takes a few minutes but can take up to 24 hours in some cases.

## 5. Network and Firewall Configuration

### 5.1 Required Ports

Pangolin requires only the following ports to be accessible from the internet:

- **Port 80 (HTTP)**: Required for Let's Encrypt certificate validation and HTTP to HTTPS redirect
- **Port 443 (HTTPS)**: Main access point for Pangolin dashboard and all services

All other services should be accessed **through Pangolin** and should not be directly exposed to the internet.

### 5.2 OPNsense Firewall Rules

#### 5.2.1 WAN Rules (Internet Access to Pangolin)

Configure OPNsense to allow only necessary traffic from the internet:

1. Log in to OPNsense web interface
2. Navigate to **Firewall > Rules > WAN**
3. **Remove or disable any existing "allow all" rules** to follow the principle of least privilege

**Create Rule 1: Allow HTTP (Port 80)**
- Click **Add** (arrow pointing down for top of list)
- **Action**: Pass
- **Interface**: WAN
- **Direction**: in
- **TCP/IP Version**: IPv4
- **Protocol**: TCP
- **Source**: any
- **Destination**: WAN address
- **Destination port range**: HTTP (80)
- **Description**: Allow HTTP for Let's Encrypt validation
- **Category**: Pangolin
- Click **Save**

**Create Rule 2: Allow HTTPS (Port 443)**
- Click **Add**
- **Action**: Pass
- **Interface**: WAN
- **Direction**: in
- **TCP/IP Version**: IPv4
- **Protocol**: TCP
- **Source**: any
- **Destination**: WAN address
- **Destination port range**: HTTPS (443)
- **Description**: Allow HTTPS for Pangolin Dashboard
- **Category**: Pangolin
- Click **Save**

4. Click **Apply Changes**

:::caution Security Note
These rules allow traffic from anywhere on the internet. Pangolin's authentication and Traefik's security features will protect your services. However, consider implementing additional security measures such as:
- Cloudflare Access or VPN for additional authentication layers
- GeoIP blocking to restrict access to specific countries
- Rate limiting in Pangolin/Traefik configuration
:::

#### 5.2.2 Port Forward Configuration

Create port forwards to direct traffic to your Pangolin LXC container:

1. Navigate to **Firewall > NAT > Port Forward**
2. Click **Add**

**Port Forward 1: HTTP (80)**
- **Interface**: WAN
- **Protocol**: TCP
- **Destination**: WAN address
- **Destination port range**: HTTP to HTTP (80 to 80)
- **Redirect target IP**: `192.168.1.50` (your Pangolin container IP)
- **Redirect target port**: HTTP (80)
- **Description**: Port forward HTTP to Pangolin
- **Category**: Pangolin
- Click **Save**

**Port Forward 2: HTTPS (443)**
- **Interface**: WAN
- **Protocol**: TCP
- **Destination**: WAN address
- **Destination port range**: HTTPS to HTTPS (443 to 443)
- **Redirect target IP**: `192.168.1.50` (your Pangolin container IP)
- **Redirect target port**: HTTPS (443)
- **Description**: Port forward HTTPS to Pangolin
- **Category**: Pangolin
- Click **Save**

3. Click **Apply Changes**

:::tip
The port forward rules will automatically create corresponding firewall rules. You can verify this by checking **Firewall > Rules > WAN** where you should see auto-generated rules for your port forwards.
:::

#### 5.2.3 LAN Rules (Internal Access)

Allow your internal network to access Pangolin:

1. Navigate to **Firewall > Rules > LAN**
2. Click **Add**

**LAN Rule: Allow Access to Pangolin**
- **Action**: Pass
- **Interface**: LAN
- **Direction**: in
- **TCP/IP Version**: IPv4
- **Protocol**: TCP
- **Source**: LAN net
- **Destination**: Single host or Network - `192.168.1.50`
- **Destination port range**: From HTTP to HTTPS (80 to 443)
- **Description**: Allow LAN access to Pangolin
- **Category**: Pangolin
- Click **Save**

3. Click **Apply Changes**

### 5.3 Verify Firewall Configuration

Test your firewall configuration:

```bash
# From an external network (not your LAN), test HTTPS access
curl -I https://pangolin.yourdomain.com

# Should return HTTP/2 200 or similar response

# Test that other ports are blocked
nc -zv your-server-ip 8080
# Should timeout or show "Connection refused"
```

## 6. Initial Pangolin Access

### 6.1 Access Pangolin Dashboard

1. Open your web browser
2. Navigate to: `https://pangolin.yourdomain.com`
3. You should see the Pangolin setup page
4. Enter the **Setup Token** that was displayed at the end of the installation (Section 3.1.6)

:::warning
If you didn't save the setup token, you can retrieve it by running this command on the Pangolin container:
```bash
cd /opt/pangolin
docker compose logs pangolin | grep "Setup Token"
```
:::

### 6.2 Complete Initial Setup

Follow the on-screen prompts to:
1. Create your admin account
2. Configure basic settings
3. Set up your organization details
4. Configure notification preferences (optional)

## 7. Adding Services to Pangolin

All services in your infrastructure should be accessed through Pangolin, not directly exposed to the internet.

### 7.1 Service Access Pattern

The recommended pattern for accessing services is:

```
Internet → Port 443 → OPNsense → Pangolin (Traefik) → Individual Services
```

This means:
- Services like Proxmox, AdGuard, NGINX Proxy Manager, etc., should **NOT** have direct WAN access
- Access them via subdomains routed through Pangolin (e.g., `proxmox.yourdomain.com`, `adguard.yourdomain.com`)
- Pangolin's Traefik reverse proxy will handle SSL termination and routing

### 7.2 Adding a Service to Pangolin

To add a service (e.g., Proxmox web interface):

1. In Pangolin dashboard, navigate to **Services** or **Containers**
2. Click **Add Service**
3. Configure the service:
   - **Name**: Proxmox
   - **URL/Address**: `https://192.168.1.2:8006` (internal Proxmox IP)
   - **Subdomain**: `proxmox` (will create `proxmox.yourdomain.com`)
   - **SSL**: Let Traefik handle SSL
4. Save the configuration
5. Pangolin will automatically:
   - Request SSL certificate from Let's Encrypt
   - Configure Traefik routing
   - Make service accessible via `https://proxmox.yourdomain.com`

### 7.3 Connecting Servers to Pangolin

To monitor and manage servers with Pangolin, install the Pangolin agent on each target server:

1. In Pangolin dashboard, navigate to **Servers**
2. Click **Add Server**
3. Copy the provided installation command, which will look similar to:

```bash
curl -fsSL https://get.digpangolin.com/agent.sh | bash -s -- \
  --url=https://pangolin.yourdomain.com \
  --token=<your-unique-token>
```

4. SSH into the target server and run the command
5. The agent will install and automatically connect to your Pangolin instance
6. Verify the connection in the Pangolin dashboard under **Servers**

:::tip
For Proxmox host and LXC containers, you may need to install the agent separately on each system you want to monitor.
:::

## 8. Security Best Practices

### 8.1 Access Control

- **Strong Authentication**: Use strong, unique passwords (minimum 16 characters)
- **API Tokens**: Regularly rotate API tokens and limit their scope
- **Session Management**: Configure appropriate session timeouts in Pangolin

### 8.2 Network Security

- **Minimize Exposure**: Only ports 80 and 443 should be accessible from WAN
- **Internal Access**: All other services should only be accessible through Pangolin or via VPN
- **Monitoring**: Regularly review access logs in Pangolin and OPNsense

### 8.3 SSL/TLS Configuration

- Pangolin's Traefik automatically handles SSL certificates via Let's Encrypt
- Certificates auto-renew before expiration
- Monitor certificate status in Pangolin dashboard

### 8.4 Regular Updates

Keep Pangolin and its dependencies up to date:

```bash
# Update Pangolin (run inside Pangolin container)
cd /opt/pangolin
docker compose pull
docker compose up -d

# Update system packages
apt update && apt upgrade -y
```

## 9. Troubleshooting

### 9.1 Cannot Access Pangolin Dashboard

**Check DNS Resolution:**
```bash
# Verify DNS is pointing to your server
dig pangolin.yourdomain.com +short
# Should return your server's public IP
```

**Check Port Forwarding:**
- Verify OPNsense port forwards are active
- Check that WAN firewall rules allow ports 80 and 443
- Ensure Pangolin container is running: `docker compose ps`

**Check Traefik Logs:**
```bash
cd /opt/pangolin
docker compose logs traefik
```

### 9.2 SSL Certificate Issues

If Let's Encrypt certificates fail to generate:

**Verify HTTP Challenge is Accessible:**
```bash
# From external network
curl -I http://pangolin.yourdomain.com/.well-known/acme-challenge/test
# Should reach your server (404 is expected, connection refused is not)
```

**Check Traefik Certificate Resolver:**
```bash
# View certificate resolver logs
docker compose logs traefik | grep -i "certificate"
```

**Common Issues:**
- Port 80 not accessible from internet (required for HTTP challenge)
- DNS not pointing to correct IP
- Cloudflare proxy enabled (must be gray cloud/DNS only)
- Rate limiting from Let's Encrypt (limit is 5 certificates per domain per week)

### 9.3 Services Not Accessible Through Pangolin

**Verify Service Configuration:**
- Check service is running and accessible from Pangolin container
- Verify internal IP addresses and ports are correct
- Test connectivity: `curl http://192.168.1.x:port` from Pangolin container

**Check Traefik Routing:**
```bash
# View Traefik dashboard (if enabled)
# Or check logs for routing errors
docker compose logs traefik | grep -i error
```

### 9.4 Agent Connection Issues

If servers can't connect to Pangolin:

**Check Agent URL:**
- Ensure using `https://pangolin.yourdomain.com` (not IP address)
- Verify DNS resolution from target server

**Check Firewall:**
- Ensure LAN firewall rules allow traffic to Pangolin
- Verify no firewall on target server blocking outbound HTTPS

**Check Agent Logs:**
```bash
# On target server
journalctl -u pangolin-agent -f
```

## 10. Backup and Recovery

### 10.1 Backup Pangolin Configuration

Create a backup script for Pangolin data:

```bash
# Create backup script
cat <<'EOF' > /opt/pangolin/backup.sh
#!/bin/bash
BACKUP_DIR="/opt/pangolin/backups"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)

mkdir -p "$BACKUP_DIR"

# Stop containers
cd /opt/pangolin
docker compose down

# Backup data directory
tar -czf "$BACKUP_DIR/pangolin-backup-$TIMESTAMP.tar.gz" data/

# Restart containers
docker compose up -d

# Remove backups older than 30 days
find "$BACKUP_DIR" -name "pangolin-backup-*.tar.gz" -mtime +30 -delete

echo "Backup completed: pangolin-backup-$TIMESTAMP.tar.gz"
EOF

chmod +x /opt/pangolin/backup.sh

# Schedule daily backups at 2 AM
(crontab -l 2>/dev/null; echo "0 2 * * * /opt/pangolin/backup.sh >> /var/log/pangolin-backup.log 2>&1") | crontab -
```

### 10.2 Restore from Backup

To restore Pangolin from a backup:

```bash
cd /opt/pangolin
docker compose down
rm -rf data/
tar -xzf backups/pangolin-backup-YYYYMMDD_HHMMSS.tar.gz
docker compose up -d
```

## 11. Additional Resources

### Official Documentation

- [Pangolin Official Docs](https://docs.digpangolin.com/)
- [Pangolin GitHub Repository](https://github.com/digpangolin/pangolin)
- [Traefik Documentation](https://doc.traefik.io/traefik/)
- [Let's Encrypt Documentation](https://letsencrypt.org/docs/)

### Related Documentation

- [Proxmox Setup](./proxmox-setup.mdx)
- [OPNsense Setup](./opnsense-setup.mdx)
- [AdGuard Home Setup](./adguard-home-setup.mdx)

### Community Resources

- [Proxmox VE Helper Scripts](https://community-scripts.github.io/ProxmoxVE/)
- [Docker in LXC Guide](https://pve.proxmox.com/wiki/Linux_Container#pct_container_storage)

## Next Steps

After setting up Pangolin successfully:

1. **Add Your First Service**: Configure access to Proxmox through Pangolin
2. **Install Agents**: Deploy Pangolin agents to servers you want to monitor
3. **Configure Monitoring**: Set up alerts for critical infrastructure events
4. **Deploy Services**: Use Pangolin to deploy and manage containerized applications
5. **Document Your Setup**: Keep notes on your specific configurations and customizations

Congratulations! You now have a secure, centralized infrastructure management platform with all services accessible through a single entry point.